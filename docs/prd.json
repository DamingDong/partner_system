{
  "project": {
    "name": "partner_system",
    "fullName": "三方合作伙伴管理系统",
    "version": "2.0",
    "lastUpdated": "2025-01-05",
    "author": "AI助手",
    "status": "待确认"
  },
  "technical": {
    "stack": {
      "frontend": ["React 18", "TypeScript", "Vite", "Tailwind CSS", "Shadcn/ui"],
      "state": ["Zustand", "React Query"],
      "ui": ["Lucide React", "Recharts", "React Hook Form"],
      "build": ["Vite", "ESLint", "Prettier"]
    },
    "architecture": "单页应用(SPA) + 服务端API",
    "deployment": ["本地开发", "测试环境", "生产环境"]
  },
  "features": {
    "dashboard": {
      "description": "系统仪表板",
      "components": ["统计卡片", "收入趋势图", "最近交易记录"],
      "metrics": ["总会员卡数", "活跃会员卡", "总收入", "本月收入"]
    },
    "cards": {
      "description": "会员卡管理",
      "types": ["REGULAR", "BOUND"],
      "status": ["ACTIVE", "INACTIVE", "EXPIRED", "BOUND"],
      "functions": ["列表管理", "状态管理", "批量操作", "使用统计"],
      "binding": {
        "types": ["MAC_ADDRESS", "CHANNEL_PACKAGE"],
        "info": ["MAC地址", "渠道包", "手机号", "设备信息"]
      }
    },
    "partners": {
      "description": "合作伙伴管理",
      "types": ["DIRECT", "DISTRIBUTOR", "AGENT"],
      "status": ["ACTIVE", "INACTIVE", "SUSPENDED"],
      "functions": ["列表展示", "搜索筛选", "统计分析", "权限管理"]
    },
    "revenueSharing": {
      "description": "分账管理",
      "rules": ["固定比例", "阶梯式", "条件式"],
      "functions": ["实时计算", "规则配置", "统计分析", "异常处理"],
      "metrics": ["总分账金额", "收到分账", "支出分账", "分账笔数"]
    },
    "reconciliation": {
      "description": "对账管理",
      "cycles": ["日对账", "周对账", "月对账"],
      "types": ["自动对账", "手动对账"],
      "functions": ["生成对账单", "预览下载", "标记已对账", "异常处理"]
    }
  },
  "userRoles": {
    "ADMIN": {
      "description": "系统超级管理员",
      "permissions": ["全部权限"]
    },
    "PARTNER": {
      "description": "业务合作伙伴",
      "permissions": ["查看仪表板", "管理自己的会员卡", "管理自己的分账", "查看自己的对账单"]
    },
    "OPERATOR": {
      "description": "系统操作员",
      "permissions": ["查看仪表板", "管理合作伙伴", "管理会员卡", "管理分账", "管理对账"]
    }
  },
  "dataModels": {
    "User": {
      "id": "string",
      "username": "string",
      "email": "string",
      "phone": "string",
      "name": "string",
      "role": "UserRole",
      "partnerId": "string?",
      "createdAt": "string",
      "updatedAt": "string"
    },
    "Partner": {
      "id": "string",
      "name": "string",
      "type": "PartnerType",
      "parentId": "string?",
      "level": "number",
      "commissionRate": "number",
      "status": "PartnerStatus",
      "contactInfo": "ContactInfo",
      "createdAt": "string",
      "updatedAt": "string"
    },
    "MembershipCard": {
      "id": "string",
      "cardNumber": "string",
      "cardType": "CardType",
      "partnerId": "string",
      "remainingAmount": "number",
      "totalAmount": "number",
      "status": "CardStatus",
      "bindingInfo": "BindingInfo?",
      "createdAt": "string",
      "updatedAt": "string"
    }
  },
  "apiEndpoints": {
    "partners": {
      "GET /api/v1/partners": "获取合作伙伴列表",
      "GET /api/v1/partners/:id": "获取单个合作伙伴详情",
      "POST /api/v1/partners": "创建新合作伙伴",
      "PUT /api/v1/partners/:id": "更新合作伙伴信息",
      "DELETE /api/v1/partners/:id": "删除合作伙伴"
    },
    "cards": {
      "GET /api/v1/cards": "获取会员卡列表",
      "GET /api/v1/cards/:id": "获取会员卡详情",
      "POST /api/v1/cards": "创建新会员卡",
      "PUT /api/v1/cards/:id": "更新会员卡信息",
      "POST /api/v1/cards/:id/bind": "绑定会员卡",
      "POST /api/v1/cards/:id/unbind": "解绑会员卡"
    },
    "revenue": {
      "GET /api/v1/sharing-records": "获取分账记录",
      "GET /api/v1/sharing-rules": "获取分账规则",
      "POST /api/v1/sharing-rules": "创建分账规则",
      "GET /api/v1/revenue-summary": "获取收入汇总"
    },
    "reconciliation": {
      "GET /api/v1/reconciliation-statements": "获取对账单列表",
      "POST /api/v1/reconciliation-statements": "生成对账单",
      "GET /api/v1/reconciliation-statements/:id/download": "下载对账单"
    }
  },
  "performance": {
    "responseTime": {
      "pageLoad": "≤ 3秒",
      "apiResponse": "≤ 2秒",
      "reconciliation": "≤ 30秒"
    },
    "availability": "≥ 99.9%",
    "concurrentUsers": "≥ 1000",
    "accuracy": {
      "revenueCalculation": "100%",
      "dataIntegrity": "100%"
    }
  },
  "security": {
    "encryption": {
      "storage": "AES-256",
      "transmission": "HTTPS/TLS 1.3"
    },
    "accessControl": "RBAC (基于角色的权限控制)",
    "audit": "完整操作审计追踪",
    "compliance": ["GDPR", "CCPA", "财务合规", "行业标准"]
  },
  "uiDesign": {
    "designSystem": "Shadcn/ui",
    "responsive": {
      "desktop": "1920px+",
      "tablet": "768px - 1919px",
      "mobile": "320px - 767px"
    },
    "browsers": ["Chrome 90+", "Firefox 88+", "Safari 14+", "Edge 90+"],
    "mobileOS": ["iOS 14+", "Android 10+"]
  },
  "milestones": [
    {
      "phase": "需求确认",
      "duration": "第1周",
      "deliverables": ["完整PRD文档"]
    },
    {
      "phase": "设计阶段",
      "duration": "第2-3周",
      "deliverables": ["UI设计稿", "技术方案"]
    },
    {
      "phase": "开发阶段",
      "duration": "第4-8周",
      "deliverables": ["核心功能开发"]
    },
    {
      "phase": "测试阶段",
      "duration": "第9-10周",
      "deliverables": ["测试报告", "缺陷修复"]
    },
    {
      "phase": "上线阶段",
      "duration": "第11周",
      "deliverables": ["生产环境部署"]
    },
    {
      "phase": "运维阶段",
      "duration": "第12周起",
      "deliverables": ["监控报告", "优化迭代"]
    }
  ],
  "risks": {
    "technical": [
      "性能瓶颈",
      "兼容性问题",
      "安全漏洞"
    ],
    "business": [
      "需求变更",
      "用户接受度",
      "合规风险"
    ]
  },
  "deployment": {
    "environments": ["开发环境", "测试环境", "生产环境"],
    "monitoring": ["Sentry", "Web Vitals", "Google Analytics"],
    "backup": {
      "frequency": "每日自动备份",
      "rto": "≤ 1小时",
      "rpo": "≤ 15分钟"
    }
  },
  "futureIterations": {
    "phase1": {
      "name": "MVP",
      "features": ["基础会员卡管理", "简单分账功能", "月度对账单"]
    },
    "phase2": {
      "name": "增强功能",
      "features": ["高级分账规则", "实时对账", "移动端优化"]
    },
    "phase3": {
      "name": "高级特性",
      "features": ["数据分析与报表", "第三方系统集成", "多语言支持"]
    }
  }
}